<div class="attachments-list">

  <!-- Start: Заголовок блока -->
  <div class="caption" *ngIf="caption">{{caption}}</div>
  <!-- End: Заголовок блока -->

  <div class="no-attachments-placeholder" *ngIf="attachmentsList.length === 0">
    <span>Вложения отсутствуют</span>

    <button class="kol-button mt-3" (click)="dialog.click()" [disabled]="removingInProgress || uploadingInProgress">
      <mat-icon *ngIf="!uploadingInProgress && !removingInProgress">cloud_upload</mat-icon>
      <mat-progress-spinner *ngIf="uploadingInProgress" diameter="20" mode="indeterminate"></mat-progress-spinner>
      <span>Загрузить файл</span>
      <input type="file" #dialog (change)="onSelectFile($event.target.files)">
    </button>
  </div>

  <div class="attachment" *ngFor="let attachment of attachmentsList">
    <div class="file-type-icon">
      <mat-icon>attach_file</mat-icon>
      <span class="extension">{{attachment.extension}}</span>
    </div>
    <div class="details">
      <div class="file-name">
        <a href="{{attachment.url}}">{{attachment.fileName}}</a>
      </div>
      <div class="properties">{{attachment.size}}</div>
    </div>
    <div class="controls">
      <a href="{{attachment.url}}"
         class="control small"
         matTooltip="Скачать файл"
         matTooltipPosition="above">
        <mat-icon>arrow_downward</mat-icon>
      </a>
      <button
        class="control small"
        *ngIf="allowDelete"
        matTooltip="Удалить файл"
        matTooltipPosition="above"
        (click)="onRemoveAttachment(attachment)">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>


  <!-- Start: Элементы управления списка вложений -->
  <div class="list-controls" *ngIf="attachmentsList.length > 0 && allowUpload">
    <button class="kol-button" (click)="dialog.click()" [disabled]="removingInProgress || uploadingInProgress">
      <mat-icon *ngIf="!uploadingInProgress && !removingInProgress">cloud_upload</mat-icon>
      <mat-progress-spinner *ngIf="uploadingInProgress" diameter="20" mode="indeterminate"></mat-progress-spinner>
      <span>Загрузить файл</span>
      <input type="file" #dialog (change)="onSelectFile($event.target.files)">
    </button>
  </div>
  <!-- End: Элементы управления списка вложений -->
</div>
