<div class="add-request-dialog" matDialogContent>

  <!-- Start: Блок выбора типа мероприяития -->
  <div class="request-type-section">

    <div class="form-caption-steps">
      <div class="form-caption">Новое<br>объявление</div>

      <div class="form-steps">
        <div class="form-step"
             [ngClass]="{'active': step.isActive}"
             *ngFor="let step of formWithSteps.steps; let i = index"
             (click)="formWithSteps.selectStep(i)">
          <div class="step-icon">
            <mat-icon>{{step.icon}}</mat-icon>
            <mat-icon class="indicator valid" *ngIf="step.isValid">done</mat-icon>
            <mat-icon class="indicator invalid" *ngIf="step.isInvalid">priority_high</mat-icon>
          </div>
          <div class="step-caption">
            <div class="caption">{{step.caption}}</div>
            <div class="description">{{step.description}}</div>
          </div>
        </div>
      </div>
    </div>


    <div class="form-controls">
      <button
        class="p-3"
        mat-raised-button
        color="primary"
        [disabled]="advertForm.invalid || !content"
        (click)="addAdvert()">
        Добавить объявление
      </button>
    </div>
  </div>
  <!-- End: Блок выбора мероприятия -->

  <!-- Start: Область ввода параметров заявки -->
  <div class="request-steps-section" [ngSwitch]="formWithSteps.getSelectedStep()">

    <div *ngSwitchCase="formWithSteps.steps[0]">
      <div class="row pl-2 pr-2">
        <div class="col-12">
          <form [formGroup]="advertForm">

            <mat-form-field appearance="fill" class="w-100 mt-2">
              <mat-label>Заголовок объявления</mat-label>
              <input matInput placeholder="Введите заголовок объявления" [errorStateMatcher]="matcher" formControlName="title" required>
              <mat-icon class="valid-icon" matSuffix *ngIf="advertForm.get('title').valid">done</mat-icon>
              <mat-error *ngIf="advertForm.get('title').invalid">Вы не указали заголовок объявления</mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill" class="w-100 mt-4">
              <mat-label>Краткое содержание объявления</mat-label>
              <input matInput placeholder="Введите краткое содержание объявления" [errorStateMatcher]="matcher" formControlName="preview" required>
              <mat-icon class="valid-icon" matSuffix *ngIf="advertForm.get('preview').valid">done</mat-icon>
              <mat-error *ngIf="advertForm.get('preview').invalid">Вы не указали краткое содержание объявления</mat-error>
            </mat-form-field>
          </form>

          <div class="row mt-4">
            <div class="col-12">
             <ckeditor
               [editor]="Editor"
               [config]="editorConfig"
               [(ngModel)]="content"
               (change)="newAdvertContentChanged($event)">
             </ckeditor>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="h-100" *ngSwitchCase="formWithSteps.steps[1]">
      <div class="h-100 d-flex flex-column justify-content-start">
        <!--
        <span>Вложений нет</span><br>
        <button mat-stroked-button (click)="dialog.click()">
          Загрузить
          <input type="file" name="" id="" style="visibility: hidden; width: 0px;" #dialog (change)="attachmentSelected($event)">
        </button>
        -->
        <app-attachments-list
          [attachments]="(advert$ | async).attachments"
          [allowUpload]="true"
          (select)="attachmentSelected($event)">
        </app-attachments-list>
      </div>
    </div>
  </div>
  <!-- End: Область ввода параметров заявки -->


  <!--
  <div class="close-modal-section">
    <mat-icon>close</mat-icon>
  </div>
  -->

</div>
